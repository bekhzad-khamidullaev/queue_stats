from __future__ import annotations

from typing import Dict

from django.utils.translation import get_language

TRANSLATIONS: Dict[str, Dict[str, str]] = {
    "en": {
        "Главная": "Home",
        "Выплаты": "Payouts",
        "Выйти": "Logout",
        "Применить фильтры": "Apply filters",
        "Очереди (AMI / Realtime)": "Queues (AMI / Realtime)",
        "Нет данных по очередям.": "No queue data.",
        "Активные звонки (AMI)": "Active calls (AMI)",
        "Канал": "Channel",
        "Кто звонит": "Caller",
        "С кем соединен": "Connected",
        "Длительность": "Duration",
        "Приложение": "Application",
        "Активных каналов нет.": "No active channels.",
        "Активные вызовы": "Active calls",
        "В ожидании": "Waiting",
        "Активные операторы": "Active operators",
        "Настройки системы": "System settings",
        "Валюта": "Currency",
        "Базовая цена за минуту": "Base payout per minute",
        "Язык интерфейса": "Interface language",
        "Начало бизнес-дня": "Business day start",
        "Конец бизнес-дня": "Business day end",
        "SLA цель, %": "SLA target, %",
        "SLA порог ожидания, сек": "SLA wait threshold, sec",
        "Сохранить общие настройки": "Save general settings",
        "Обновить": "Refresh",
        "Обновить дашборд": "Refresh dashboard",
        "Рассчитать выплаты": "Calculate payouts",
        "Поиск по маппингу/ставкам": "Search mappings/rates",
        "Поиск по маппингу": "Search mapping",
        "Фильтр": "Filter",
        "Сбросить": "Reset",
        "Маппинг": "Mapping",
        "Маппинг отображаемых имен": "Display name mappings",
        "Маппинг очередей": "Queue mappings",
        "Выберите очередь": "Select queue",
        "Например: Техподдержка": "Example: Support",
        "Сохранить": "Save",
        "Удалить": "Delete",
        "Системное": "System",
        "Отображаемое": "Display",
        "Нет маппинга": "No mappings",
        "Маппинг операторов": "Agent mappings",
        "Выберите оператора": "Select agent",
        "Например: Иванов И.И.": "Example: John Smith",
        "Ставки операторов": "Operator rates",
        "Например: 3.50": "Example: 3.50",
        "Оператор": "Operator",
        "Ставка/мин": "Rate/min",
        "Нет ставок": "No rates",
        "Нет данных": "No data",
        "Нет": "No",
        "Период": "Period",
        "Всего": "Total",
        "Всего звонков": "Total calls",
        "Всего CDR": "Total CDR",
        "Звонков": "Calls",
        "Минут разговора": "Talk minutes",
        "Минуты": "Minutes",
        "Сумма выплат": "Total payouts",
        "Операторов со ставкой": "Agents with rate",
        "Без ставки": "Without rate",
        "По операторам": "By operators",
        "По очередям и операторам": "By queues and operators",
        "Очередь": "Queue",
        "Выплата": "Payout",
        "Ставка за минуту": "Rate per minute",
        "Дневная динамика": "Daily trend",
        "Почасовая нагрузка": "Hourly load",
        "KPI по очередям": "Queue KPIs",
        "KPI по операторам": "Operator KPIs",
        "Дневная динамика звонков": "Daily call trend",
        "Queue analytics: Calls и SLA": "Queue analytics: Calls and SLA",
        "Operator analytics: Talk minutes и Payout": "Operator analytics: Talk minutes and payout",
        "Единый Django-монолит (HTMX + WebSocket + AMI)": "Unified Django monolith (HTMX + WebSocket + AMI)",
        "Детализации разделены по отдельным страницам. На всех страницах используются mapping-имена очередей и операторов.": "Details are split into separate pages. Mapping names for queues and agents are used across all pages.",
        "Прослушивание": "Playback",
        "Логин": "Username",
        "Пароль": "Password",
        "Войти": "Sign in",
        "Тематические дашборды": "Thematic dashboards",
        "Разделены по направлениям: трафик, KPI очередей, KPI операторов и выплаты.": "Split by topics: traffic, queue KPIs, operator KPIs, and payouts.",
        "Трафик": "Traffic",
        "Дневная и почасовая нагрузка, гистограммы.": "Daily and hourly load, charts.",
        "Очереди": "Queues",
        "SLA, abandon/timeout и AHT по очередям.": "SLA, abandon/timeout and AHT by queue.",
        "Операторы": "Operators",
        "Производительность операторов и выплаты.": "Operator performance and payouts.",
        "AMI не настроен": "AMI is not configured",
        "Нет соединения с AMI": "No AMI connection",
        "Неизвестно": "Unknown",
        "Неверный логин или пароль": "Invalid username or password",
        "Общие настройки сохранены": "General settings saved",
        "Маппинг очереди удалён": "Queue mapping deleted",
        "Маппинг очереди сохранён": "Queue mapping saved",
        "Маппинг оператора удалён": "Agent mapping deleted",
        "Маппинг оператора сохранён": "Agent mapping saved",
        "Ставка оператора удалена": "Operator rate deleted",
        "Ставка оператора сохранена": "Operator rate saved",
    },
    "uz": {
        "Главная": "Bosh sahifa",
        "Выплаты": "To'lovlar",
        "Выйти": "Chiqish",
        "Применить фильтры": "Filtrlarni qo'llash",
        "Очереди (AMI / Realtime)": "Navbatlar (AMI / Realtime)",
        "Нет данных по очередям.": "Navbatlar bo'yicha ma'lumot yo'q.",
        "Активные звонки (AMI)": "Faol qo'ng'iroqlar (AMI)",
        "Канал": "Kanal",
        "Кто звонит": "Qo'ng'iroq qiluvchi",
        "С кем соединен": "Ulangan abonent",
        "Длительность": "Davomiyligi",
        "Приложение": "Ilova",
        "Активных каналов нет.": "Faol kanallar yo'q.",
        "Активные вызовы": "Faol qo'ng'iroqlar",
        "В ожидании": "Kutayotganlar",
        "Активные операторы": "Faol operatorlar",
        "Настройки системы": "Tizim sozlamalari",
        "Валюта": "Valyuta",
        "Базовая цена за минуту": "Bir daqiqa uchun bazaviy narx",
        "Язык интерфейса": "Interfeys tili",
        "Начало бизнес-дня": "Ish kunining boshlanishi",
        "Конец бизнес-дня": "Ish kunining tugashi",
        "SLA цель, %": "SLA maqsadi, %",
        "SLA порог ожидания, сек": "SLA kutish chegarasi, soniya",
        "Сохранить общие настройки": "Umumiy sozlamalarni saqlash",
        "Обновить": "Yangilash",
        "Обновить дашборд": "Dashboardni yangilash",
        "Рассчитать выплаты": "To'lovlarni hisoblash",
        "Поиск по маппингу/ставкам": "Mapping/stavkalar bo'yicha qidirish",
        "Поиск по маппингу": "Mapping bo'yicha qidirish",
        "Фильтр": "Filtr",
        "Сбросить": "Tozalash",
        "Маппинг": "Mapping",
        "Маппинг отображаемых имен": "Ko'rsatish nomlari mappingi",
        "Маппинг очередей": "Navbat mappinglari",
        "Выберите очередь": "Navbatni tanlang",
        "Например: Техподдержка": "Masalan: Texnik yordam",
        "Сохранить": "Saqlash",
        "Удалить": "O'chirish",
        "Системное": "Tizim nomi",
        "Отображаемое": "Ko'rsatiladigan nom",
        "Нет маппинга": "Mapping yo'q",
        "Маппинг операторов": "Operator mappinglari",
        "Выберите оператора": "Operatorni tanlang",
        "Например: Иванов И.И.": "Masalan: Aliyev A.A.",
        "Ставки операторов": "Operator stavkalari",
        "Например: 3.50": "Masalan: 3.50",
        "Оператор": "Operator",
        "Ставка/мин": "Stavka/min",
        "Нет ставок": "Stavkalar yo'q",
        "Нет данных": "Ma'lumot yo'q",
        "Нет": "Yo'q",
        "Период": "Davr",
        "Всего": "Jami",
        "Всего звонков": "Jami qo'ng'iroqlar",
        "Всего CDR": "Jami CDR",
        "Звонков": "Qo'ng'iroqlar",
        "Минут разговора": "Suhbat daqiqalari",
        "Минуты": "Daqiqalar",
        "Сумма выплат": "To'lovlar summasi",
        "Операторов со ставкой": "Stavkali operatorlar",
        "Без ставки": "Stavkasiz",
        "По операторам": "Operatorlar bo'yicha",
        "По очередям и операторам": "Navbatlar va operatorlar bo'yicha",
        "Очередь": "Navbat",
        "Выплата": "To'lov",
        "Ставка за минуту": "Bir daqiqalik stavka",
        "Дневная динамика": "Kunlik dinamika",
        "Почасовая нагрузка": "Soatlik yuklama",
        "KPI по очередям": "Navbat KPI",
        "KPI по операторам": "Operator KPI",
        "Дневная динамика звонков": "Qo'ng'iroqlarning kunlik dinamikasi",
        "Queue analytics: Calls и SLA": "Navbat analitikasi: Qo'ng'iroqlar va SLA",
        "Operator analytics: Talk minutes и Payout": "Operator analitikasi: Suhbat daqiqalari va to'lov",
        "Единый Django-монолит (HTMX + WebSocket + AMI)": "Yagona Django monoliti (HTMX + WebSocket + AMI)",
        "Детализации разделены по отдельным страницам. На всех страницах используются mapping-имена очередей и операторов.": "Hisobotlar alohida sahifalarga ajratilgan. Barcha sahifalarda navbat va operator mapping nomlari ishlatiladi.",
        "Прослушивание": "Eshitish",
        "Логин": "Login",
        "Пароль": "Parol",
        "Войти": "Kirish",
        "Тематические дашборды": "Mavzuli dashboardlar",
        "Разделены по направлениям: трафик, KPI очередей, KPI операторов и выплаты.": "Yo'nalishlar bo'yicha bo'lingan: trafik, navbat KPI, operator KPI va to'lovlar.",
        "Трафик": "Trafik",
        "Дневная и почасовая нагрузка, гистограммы.": "Kunlik va soatlik yuklama, grafiklar.",
        "Очереди": "Navbatlar",
        "SLA, abandon/timeout и AHT по очередям.": "Navbatlar bo'yicha SLA, abandon/timeout va AHT.",
        "Операторы": "Operatorlar",
        "Производительность операторов и выплаты.": "Operator samaradorligi va to'lovlar.",
        "AMI не настроен": "AMI sozlanmagan",
        "Нет соединения с AMI": "AMI bilan ulanish yo'q",
        "Неизвестно": "Noma'lum",
        "Неверный логин или пароль": "Login yoki parol noto'g'ri",
        "Общие настройки сохранены": "Umumiy sozlamalar saqlandi",
        "Маппинг очереди удалён": "Navbat mappingi o'chirildi",
        "Маппинг очереди сохранён": "Navbat mappingi saqlandi",
        "Маппинг оператора удалён": "Operator mappingi o'chirildi",
        "Маппинг оператора сохранён": "Operator mappingi saqlandi",
        "Ставка оператора удалена": "Operator stavkasi o'chirildi",
        "Ставка оператора сохранена": "Operator stavkasi saqlandi",
    },
}


def tr(text: str, lang: str | None = None) -> str:
    code = (lang or get_language() or "ru")[:2].lower()
    return TRANSLATIONS.get(code, {}).get(text, text)
