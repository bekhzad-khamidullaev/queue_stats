{% extends "stats/base.html" %}
{% block title %}Исходящие звонки{% endblock %}
{% block body %}
<section class="radix-card p-4 mb-4">
  <form method="get" class="filters-grid grid grid-cols-1 md:grid-cols-7 gap-3">
    <input type="datetime-local" step="1" name="start" value="{{ start|date:'Y-m-d\\TH:i:s' }}" class="radix-input" />
    <input type="datetime-local" step="1" name="end" value="{{ end|date:'Y-m-d\\TH:i:s' }}" class="radix-input" />
    <input type="hidden" name="agents" value="" />
    <select name="agents" multiple class="radix-input radix-select-multi">
      {% for a in agent_options %}<option value="{{ a.value }}"{% if a.value in selected_agents_list %} selected{% endif %}>{{ a.label }}</option>{% endfor %}
    </select>
    <input name="src" value="{{ selected_src }}" placeholder="src" class="radix-input" />
    <input name="dst" value="{{ selected_dst }}" placeholder="dst" class="radix-input" />
    <input name="disposition" value="{{ selected_disposition }}" placeholder="ANSWERED/NO ANSWER/BUSY" class="radix-input" />
    <select name="page_size" class="radix-input">
      <option value="50"{% if selected_page_size == "50" %} selected{% endif %}>50 / page</option>
      <option value="100"{% if selected_page_size == "100" %} selected{% endif %}>100 / page</option>
      <option value="200"{% if selected_page_size == "200" %} selected{% endif %}>200 / page</option>
      <option value="500"{% if selected_page_size == "500" %} selected{% endif %}>500 / page</option>
    </select>
    <button class="radix-button md:col-span-7" type="submit">{% tr "Обновить" %}</button>
  </form>
  <div class="flex flex-wrap gap-2 mt-3">
    <a class="radix-button-secondary" href="{% url 'ui-export-outbound-xlsx' %}?start={{ start|date:'Y-m-d\\TH:i:s' }}&end={{ end|date:'Y-m-d\\TH:i:s' }}&agents={{ selected_agents }}&src={{ selected_src }}&dst={{ selected_dst }}&disposition={{ selected_disposition }}">XLSX</a>
    <a class="radix-button-secondary" href="{% url 'ui-export-outbound-pdf' %}?start={{ start|date:'Y-m-d\\TH:i:s' }}&end={{ end|date:'Y-m-d\\TH:i:s' }}&agents={{ selected_agents }}&src={{ selected_src }}&dst={{ selected_dst }}&disposition={{ selected_disposition }}">PDF</a>
  </div>
</section>

<section class="radix-card p-4">{% include "stats/partials/outbound_report.html" %}</section>
{% endblock %}
